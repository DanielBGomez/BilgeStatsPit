<?php 
require('core/database.php');
require('core/configuration.php');

class Core extends Database {
	function Core(){
		set_time_limit(0);
		$this->conf = new Configuracion();
		$this->url=preg_split("/\//",str_replace('/bilgestatspit', '', $_SERVER['PHP_SELF']));
		

		if(isset($this->url[2]) && $this->url[2] == 'update'){
			$this->update();
		} else {
			$this->title='Home - ';
			$this->url[2] = 'index';
		}
	}
	function __destruct(){unset($this);}

	function sortArray(&$arr, $col, $dir = SORT_ASC) {
		error_reporting(0);
		$sort_col = array();
		foreach ($arr as $key=> $row) {
			$sort_col[$key] = $row[$col];
		}

		array_multisort($sort_col, $dir, $arr);
		return $sort_col;
	}

	function getPercentColor($val,$corte){
		if($val!='-'){
			if(intval($val)>intval($corte)){
				return $this->conf->percentcolor['+'];
			} elseif (intval($val)<intval($corte)) {
				return $this->conf->percentcolor['-'];
			} elseif (intval($val)==intval($corte)) {
				return $this->conf->percentcolor['='];
			} else {
				return "Error";
			}
		}
	}

	function getChampInfo($id,$query,$order){
		$id = (!empty($id)) ? "WHERE id='$id'" : '';
		$order = (!empty($order)) ? "ORDER BY $order" : '';
		$this->query = "SELECT $query FROM champions $id $order";
		$this->get_result_from_query();
		if(empty($id)){ 
			return $this->rows;
		} else {
			return $this->rows[0];
		}
	}

	function getBilgeSummary(){
		$this->alldata = 549470;
		$allgames = $this->alldata/10;
		//$champs = $this->getChampInfo('', 'id,keyname,fullname','keyname ASC');
		//print '$'."champs = json_decode('".htmlentities(json_encode($champs))."',true);";
		//exit;
		$champs = json_decode('[["266","Aatrox","Aatrox"],["103","Ahri","Ahri"],["84","Akali","Akali"],["12","Alistar","Alistar"],["32","Amumu","Amumu"],["34","Anivia","Anivia"],["1","Annie","Annie"],["22","Ashe","Ashe"],["268","Azir","Azir"],["432","Bard","Bard"],["53","Blitzcrank","Blitzcrank"],["63","Brand","Brand"],["201","Braum","Braum"],["51","Caitlyn","Caitlyn"],["69","Cassiopeia","Cassiopeia"],["31","Chogath","Cho&#039;Gath"],["42","Corki","Corki"],["122","Darius","Darius"],["131","Diana","Diana"],["119","Draven","Draven"],["36","DrMundo","Dr. Mundo"],["245","Ekko","Ekko"],["60","Elise","Elise"],["28","Evelynn","Evelynn"],["81","Ezreal","Ezreal"],["9","FiddleSticks","Fiddlesticks"],["114","Fiora","Fiora"],["105","Fizz","Fizz"],["3","Galio","Galio"],["41","Gangplank","Gangplank"],["86","Garen","Garen"],["150","Gnar","Gnar"],["79","Gragas","Gragas"],["104","Graves","Graves"],["120","Hecarim","Hecarim"],["74","Heimerdinger","Heimerdinger"],["39","Irelia","Irelia"],["40","Janna","Janna"],["59","JarvanIV","Jarvan IV"],["24","Jax","Jax"],["126","Jayce","Jayce"],["222","Jinx","Jinx"],["429","Kalista","Kalista"],["43","Karma","Karma"],["30","Karthus","Karthus"],["38","Kassadin","Kassadin"],["55","Katarina","Katarina"],["10","Kayle","Kayle"],["85","Kennen","Kennen"],["121","Khazix","Kha&#039;Zix"],["96","KogMaw","Kog&#039;Maw"],["7","Leblanc","LeBlanc"],["64","LeeSin","Lee Sin"],["89","Leona","Leona"],["127","Lissandra","Lissandra"],["236","Lucian","Lucian"],["117","Lulu","Lulu"],["99","Lux","Lux"],["54","Malphite","Malphite"],["90","Malzahar","Malzahar"],["57","Maokai","Maokai"],["11","MasterYi","Master Yi"],["21","MissFortune","Miss Fortune"],["62","MonkeyKing","Wukong"],["82","Mordekaiser","Mordekaiser"],["25","Morgana","Morgana"],["267","Nami","Nami"],["75","Nasus","Nasus"],["111","Nautilus","Nautilus"],["76","Nidalee","Nidalee"],["56","Nocturne","Nocturne"],["20","Nunu","Nunu"],["2","Olaf","Olaf"],["61","Orianna","Orianna"],["80","Pantheon","Pantheon"],["78","Poppy","Poppy"],["133","Quinn","Quinn"],["33","Rammus","Rammus"],["421","RekSai","Rek&#039;Sai"],["58","Renekton","Renekton"],["107","Rengar","Rengar"],["92","Riven","Riven"],["68","Rumble","Rumble"],["13","Ryze","Ryze"],["113","Sejuani","Sejuani"],["35","Shaco","Shaco"],["98","Shen","Shen"],["102","Shyvana","Shyvana"],["27","Singed","Singed"],["14","Sion","Sion"],["15","Sivir","Sivir"],["72","Skarner","Skarner"],["37","Sona","Sona"],["16","Soraka","Soraka"],["50","Swain","Swain"],["134","Syndra","Syndra"],["223","TahmKench","Tahm Kench"],["91","Talon","Talon"],["44","Taric","Taric"],["17","Teemo","Teemo"],["412","Thresh","Thresh"],["18","Tristana","Tristana"],["48","Trundle","Trundle"],["23","Tryndamere","Tryndamere"],["4","TwistedFate","Twisted Fate"],["29","Twitch","Twitch"],["77","Udyr","Udyr"],["6","Urgot","Urgot"],["110","Varus","Varus"],["67","Vayne","Vayne"],["45","Veigar","Veigar"],["161","Velkoz","Vel&#039;Koz"],["254","Vi","Vi"],["112","Viktor","Viktor"],["8","Vladimir","Vladimir"],["106","Volibear","Volibear"],["19","Warwick","Warwick"],["101","Xerath","Xerath"],["5","XinZhao","Xin Zhao"],["157","Yasuo","Yasuo"],["83","Yorick","Yorick"],["154","Zac","Zac"],["238","Zed","Zed"],["115","Ziggs","Ziggs"],["26","Zilean","Zilean"],["143","Zyra","Zyra"]]',true);
		foreach ($champs as $v) {
			list($id,$keyname,$fullname) = $v;
			$array[$id]['id'] = $id;
			$array[$id]['keyname'] = $keyname;
			$array[$id]['fullname'] = $fullname;
			$ids = (isset($ids)) ? $ids.",'$id'" : "'$id'";
		}
		//$this->query="SELECT championId,count(*),sum(kills),sum(deaths),sum(assists),count(winner),sum(minionsKilled),sum(goldEarned) FROM matchparticipants WHERE championId IN($ids) GROUP BY championId";
		//$this->get_result_from_query();
		//print '$'."champsdata = json_decode('".json_encode($this->rows)."',true);"; exit;
		$champsdata = json_decode('[["1","6504","43921","43120","50493","3381","585369","66793845"],["2","2215","13615","14977","12595","1068","243153","24001665"],["3","669","3549","4039","6696","340","77016","7106751"],["4","6719","42730","50164","49258","3242","789800","75151003"],["5","8469","63636","59466","56735","4473","510437","96990912"],["6","492","2901","3008","3060","228","61306","5038662"],["7","3148","25470","19206","18361","1435","283593","31623621"],["8","3654","23052","23549","22711","1801","546678","40031581"],["9","2257","10963","15389","18480","1086","115284","22746700"],["10","3669","22265","22352","26173","1907","330323","41978374"],["11","10702","90122","80145","51178","5308","974523","132020775"],["12","3554","7496","19646","44158","1776","147171","30969763"],["13","1366","6707","9682","7911","577","159005","13342747"],["14","2026","10135","12902","17765","1049","218584","21584951"],["15","4787","29016","28698","38913","2516","765718","55511886"],["16","3784","5521","20568","49994","2000","96557","33627448"],["17","8938","57056","59928","56040","4472","1058607","95581912"],["18","5671","39811","35272","34208","2743","801391","63054905"],["19","6561","41380","39606","49685","3514","308464","74095660"],["20","2282","9296","13266","21350","1147","115172","24060748"],["21","13451","99048","86708","97228","6852","1971402","155516403"],["22","9097","59870","61537","73312","4610","1183131","100066346"],["23","6105","43962","39521","30228","3237","868622","74034997"],["24","6388","46027","43345","33991","3232","641407","73685892"],["25","6911","26695","40104","75352","3560","425876","67072864"],["26","800","2416","4402","8528","401","51029","7627652"],["27","1209","5651","8178","9096","626","185256","13150935"],["28","3050","20163","20759","22223","1383","130455","33132926"],["29","2343","17844","16441","14928","1095","290325","26170309"],["30","1096","8871","8489","9437","574","150424","13040602"],["31","4189","27921","22140","25525","2160","559387","46908897"],["32","3026","15830","17556","30770","1635","146109","33571161"],["33","1265","5996","8092","13582","679","68892","13359560"],["34","1186","7424","6184","9206","590","142497","12775741"],["35","4909","33626","30934","30576","2316","248995","53257810"],["36","1716","7903","9669","12487","789","189939","17164103"],["37","6636","20802","38750","85903","3503","168509","62282693"],["38","771","5502","5176","4760","305","80876","7853931"],["39","2874","21465","17776","16892","1429","374990","32072622"],["40","3093","4012","14200","42727","1663","58872","27861621"],["42","1881","13650","10723","13674","924","294423","21859440"],["43","2330","8314","12996","25503","1181","134886","22685372"],["44","1246","2819","7137","15692","645","52501","11067102"],["45","2918","21813","18890","19973","1447","381622","32268823"],["48","1743","9794","10165","13070","876","167845","19225458"],["50","1267","9544","7740","9090","698","131548","13235715"],["51","8450","55226","47701","60059","4351","1348246","98042065"],["53","10399","33030","63002","120764","5508","334419","94601660"],["54","5611","28966","30782","50213","2894","419129","55275565"],["55","4584","42992","33575","29913","2241","549880","50878434"],["56","1960","15190","13071","12604","982","149098","23758848"],["57","2011","8385","11635","18518","975","193713","20127298"],["58","2481","14755","13782","16082","1308","385882","27640802"],["59","2484","15428","15611","25066","1238","204592","27872938"],["60","2815","21752","17524","19380","1487","138826","32225991"],["61","2043","11852","11856","18053","964","273802","22085376"],["62","3162","22841","19133","21784","1713","360883","35811388"],["63","2613","20249","17807","20327","1378","275813","28480066"],["64","9974","69155","67896","78073","4699","587119","108093906"],["67","14059","108443","95335","79175","6978","1976608","161103706"],["68","1606","10718","9943","11489","788","191731","16663444"],["69","1377","9804","9748","8992","654","171083","14945469"],["72","809","4462","4394","7331","419","41922","9148002"],["74","4685","27512","29058","30363","2572","698020","51244120"],["75","4534","23448","26106","26496","2219","679386","49424109"],["76","7484","51636","50382","47372","3434","542012","77541441"],["77","3627","22676","21847","23761","1862","203254","42815696"],["78","970","6292","6301","5384","426","76422","10195604"],["79","2006","9348","11456","17626","935","96006","20330079"],["80","3496","26321","23580","23098","1731","296678","37480527"],["81","8493","57702","48022","63788","3966","1148797","93063947"],["82","1513","10485","9998","9923","839","239733","17471402"],["83","843","4007","5348","5632","375","92367","8402795"],["84","2979","29430","21664","16266","1465","307706","32656670"],["85","1370","8596","8625","9681","692","146487","13876866"],["86","6007","41132","31293","34047","3070","743379","63609742"],["89","5442","13726","31764","69570","2899","214592","48120780"],["90","2851","20605","16762","19548","1534","426375","32874371"],["91","3353","30703","24935","21872","1725","444833","38893010"],["92","5743","41681","38554","29149","2753","807154","64374009"],["96","3967","26897","26911","28512","1976","513907","43440719"],["98","3936","16066","19869","41810","1991","367573","38948422"],["99","8415","49593","45780","79702","4387","740745","85917044"],["101","1696","11301","9877","13352","866","213182","18308488"],["102","5713","37325","31593","37896","2976","468557","70224679"],["103","6283","46467","35981","47949","3310","790707","68578220"],["104","9612","68979","56847","63704","4845","1478326","110977423"],["105","8107","75491","56619","44440","3948","726174","89053521"],["106","3688","22736","21623","30296","1959","258558","38868278"],["107","6659","50436","45858","39126","3190","571800","76623540"],["110","4617","32864","29232","34109","2343","693184","53279882"],["111","9430","31455","56510","104939","4811","495306","87611572"],["112","7277","51972","50351","47678","3546","995722","79789259"],["113","1838","8441","10110","19295","949","92882","20087794"],["114","4288","37791","30702","20730","2281","568687","50088624"],["115","1961","12437","11804","15258","1000","276052","21825592"],["117","2868","8086","15708","32569","1411","160134","27286396"],["119","3666","28604","24648","23589","1767","539909","45428565"],["120","2386","15249","14317","18740","1168","184819","26642342"],["121","3084","23781","19615","17976","1429","202169","34917946"],["122","9616","77418","67673","51150","4724","1252347","106795472"],["126","2420","17205","15273","15841","1126","336602","26722561"],["127","1080","6423","7140","9003","542","151114","11921498"],["131","9779","83731","67495","63103","5029","936830","113496774"],["133","5904","43755","41957","36203","2833","785840","65559918"],["134","1028","7602","6666","6435","481","142579","11330341"],["143","1337","6876","9299","13101","705","98248","14074872"],["150","4871","28952","30695","33966","2349","653136","52463765"],["154","1095","5246","5411","9950","533","69708","11175665"],["157","9875","81175","77571","60232","5027","1631550","120339650"],["161","2414","15317","15145","20161","1264","260250","25777692"],["201","3658","7481","20798","49155","1879","139845","32029230"],["222","12633","93167","79257","90850","6508","1948243","147653784"],["223","12362","39790","77158","108036","5264","689306","107836153"],["236","3387","23363","20289","22291","1652","559693","39747732"],["238","5314","45050","37006","27768","2559","780765","61700535"],["245","6121","45435","41987","40579","2985","632983","66357721"],["254","4079","27847","26044","30435","2116","212297","47298906"],["266","3580","23538","20380","21793","1881","396734","40965853"],["267","4921","10365","28340","66221","2525","97419","44620095"],["268","2666","15909","19570","17986","1239","383057","29004142"],["412","9351","23640","57053","121325","4584","294645","83265222"],["421","2558","12926","15771","20307","1213","138061","27431035"],["429","3471","22943","23525","22937","1576","520527","38891050"],["432","5658","14697","36452","62382","2441","143762","49767003"]]',true);
		foreach ($champsdata as $v) {
			list($id,$games,$kills,$deaths,$assists,$wins,$minions,$gold) = $v;
			$array[$id]['games'] = $games;
			$array[$id]['kills'] = $kills;
			$array[$id]['deaths'] = $deaths;
			$array[$id]['assists'] = $assists;;
			$array[$id]['wins'] = $wins;
			$array[$id]['minions'] = $minions;
			$array[$id]['gold'] = $gold;
			$array[$id]['pickrate'] = round($games*100/$allgames,2);
			$array[$id]['winrate'] = round($wins*100/$games,2);
			$array[$id]['averageKills'] = round($kills/$games,2);
			$array[$id]['averageDeaths'] = round($deaths/$games,2);
			$array[$id]['averageAssists'] = round($assists/$games,2);
			$array[$id]['averageMinions'] = round($minions/$games,2);
			$array[$id]['averageGold'] = round($gold/$games);
			$array[$id]['kda'] = round(($kills+$assists)/$deaths,2);
		}
		return $array;
	}

	function getBilgeChamps($data,$order,$limit){
		$array = array();
		$limit = (!empty($limit)) ? "LIMIT $limit" : '';
		//$this->query="SELECT count(*) FROM matchparticipants";
		//$this->get_result_from_query();

		$this->rows[0][0] = 549470;

		if(!empty($this->rows[0][0])){
			$allgames = $this->rows[0][0]/10;

			//$this->query="SELECT championId,count(*),sum(kills),sum(deaths),sum(assists),count(winner),sum(minionsKilled),sum(goldEarned) FROM matchparticipants WHERE championId!='0' GROUP BY championId ORDER BY $order DESC $limit";
			//$this->get_result_from_query();
			//print json_encode($this->rows);
			//exit;
			//$this->rows = json_decode('[["67","12878","99323","87567","72516","6386","1805304","147515611"],["21","11997","88360","77634","87009","6123","1745652","138590745"],["222","11324","84017","71208","81931","5845","1742989","132699466"],["223","11158","35755","69652","97733","4769","616682","97196793"],["11","9907","83116","74181","47325","4901","906809","121843123"],["53","9547","30388","57563","110916","5097","306314","86785384"],["64","9340","64464","63536","73137","4393","542359","100899299"],["157","9005","74427","70676","54910","4584","1484441","109780428"],["104","8892","63736","52601","58944","4482","1365570","102639897"],["131","8811","75663","61200","57141","4527","847326","102139542"]]',true);
			$this->rows = json_decode('[["50","1218","9187","7399","8709","681","126196","12704741"],["82","1455","10127","9606","9513","803","231137","16829032"],["74","4503","26539","28010","29231","2475","671644","49358299"],["62","3044","22040","18361","20874","1649","347352","34446200"],["40","2973","3884","13647","41267","1606","56548","26850323"],["33","1221","5794","7811","13130","658","66648","12908571"],["32","2937","15380","17113","29897","1576","142029","32594224"],["90","2731","19772","15999","18714","1464","408830","31538967"],["19","6341","40003","38176","47959","3396","297844","71540683"],["89","5234","13193","30462","66882","2789","206538","46307628"]]',true);
			
			foreach ($this->rows as $v) {
				list($id,$games,$kills,$deaths,$assists,$wins,$minions,$gold) = $v;
				$pickrate = round($games*100/$allgames,2);
				$winrate = round($wins*100/$games,2);
				$averageKills = round($kills/$games,2);
				$averageDeaths = round($deaths/$games,2);
				$averageAssists = round($assists/$games,2);
				$averageMinions = round($minions/$games,2);
				$averageGold = round($gold/$games);
				$kda = round(($kills+$assists)/$deaths,2);
				list($keyname,$fullname,$title) = $this->getChampInfo($id,'keyname,fullname,title','');
				$array[] = array('allgames'=>$allgames,'id'=>$id,'games'=>$games,'pickrate'=>$pickrate,'wins'=>$wins,'winrate'=>$winrate,'kills'=>$kills,'averageKills'=>$averageKills,'deaths'=>$deaths,'averageDeaths'=>$averageDeaths,'assists'=>$assists,'averageAssists'=>$averageAssists,'minions'=>$minions,'averageMinions'=>$averageMinions,'gold'=>$gold,'averageGold'=>$averageGold,'kda'=>$kda,'keyname'=>$keyname,'fullname'=>$fullname,'title'=>$title);
			}
		return $array;
		} else {
			print "Error Getting Champions data!";
			exit;
		}
	}

	function getBilgeItems($limit){
		$array = array();
		$limit = (!empty($limit)) ? "LIMIT $limit" : '';
		//$this->query="SELECT count(*) FROM matchparticipants";
		//$this->get_result_from_query();

		$this->rows[0][0] = 549470;

		if(!empty($this->rows[0][0])){
			$allgames = $this->rows[0][0]/10;

			//$this->query="SELECT count($order),$order FROM matchparticipants GROUP BY $order ORDER BY count($order) DESC $limit;";
			//$this->get_result_from_query();
			//print '$'."$order = json_decode('".json_encode($this->rows)."',true);<br>";

			/*
			$item0 = json_decode('[["46198","1055"],["31203","1056"],["27173","3153"],["16180","3157"],["15959","3074"],["13238","3401"],["13231","3031"],["12199","2041"],["11901","3707"],["10773","2049"],["9958","2003"],["8498","3143"],["8461","1054"],["8308","3069"],["8133","3092"],["7705","3829"],["7588","3089"],["7574","3072"],["7451","3150"],["7435","3924"],["7108","3142"],["6843","3285"],["6706","3930"],["6204","3087"],["5107","3020"],["4865","3840"],["4712","3725"],["4704","3006"],["4606","3724"],["4554","3709"],["4523","1314"],["4378","3434"],["4204","3068"],["4071","3035"],["3965","3078"],["3957","3710"],["3707","1304"],["3626","3931"],["3484","3027"],["3314","3708"],["3270","3198"],["3192","3144"],["3037","3303"],["2996","3933"],["2940","3302"],["2875","3742"],["2865","1058"],["2767","3100"],["2756","3071"],["2750","3911"],["2748","3652"],["2745","3097"],["2698","3717"],["2669","3046"],["2584","1038"],["2570","3065"],["2441","2045"],["2424","3431"],["2311","3111"],["2291","3040"],["2246","3151"],["2202","3110"],["2196","1053"],["2195","1329"],["2154","3098"],["2129","1001"],["2116","3117"],["2034","3800"],["1971","3726"],["1906","3174"],["1854","1037"],["1845","3718"],["1812","3706"],["1793","3301"],["1791","2010"],["1745","1324"],["1739","3077"],["1728","3430"],["1685","3047"],["1657","3135"],["1654","3075"],["1646","3116"],["1637","3146"],["1599","1026"],["1589","3190"],["1580","3042"],["1568","2004"],["1525","3134"],["1517","3723"],["1414","3152"],["1376","3745"],["1373","3085"],["1367","3096"],["1322","3115"],["1300","3026"],["1287","1319"],["1263","3158"],["1254","1052"],["1238","3083"],["1223","3841"],["1145","3102"],["1141","1011"],["1079","3001"],["1058","3433"],["1045","3025"],["1015","1036"],["1005","1031"],["1003","3714"],["997","1334"],["964","3156"],["893","3070"],["830","3197"],["813","3086"],["813","3191"],["776","3211"],["764","3082"],["758","1028"],["738","1029"],["730","3004"],["701","2043"],["699","3713"],["696","1039"],["692","3716"],["683","3140"],["677","3044"],["675","3139"],["672","1300"],["669","3113"],["627","2044"],["586","3744"],["583","1018"],["567","3057"],["560","3844"],["552","3222"],["552","3196"],["544","3721"],["527","3932"],["516","3009"],["510","3136"],["493","3155"],["490","3722"],["471","1057"],["464","3067"],["426","3715"],["418","1042"],["407","3108"],["405","3003"],["397","1309"],["380","1033"],["376","1043"],["365","1311"],["365","3093"],["340","3022"],["330","1301"],["326","3508"],["317","3751"],["297","3512"],["291","3024"],["280","3801"],["273","3023"],["266","3028"],["251","3041"],["229","3720"],["220","3060"],["215","3010"],["206","1306"],["204","3050"],["195","3091"],["186","3114"],["186","1326"],["179","1321"],["170","3200"],["165","3145"],["161","3172"],["156","3101"],["144","3719"],["135","3105"],["119","3504"],["117","1027"],["114","3711"],["112","1051"],["111","1331"],["103","1316"],["86","1310"],["66","1313"],["53","1320"],["48","1004"],["46","2053"],["46","3056"],["44","1330"],["43","1006"],["38","1333"],["37","3124"],["37","3141"],["34","1315"],["31","1327"],["30","1323"],["29","2139"],["27","2140"],["24","1305"],["23","1328"],["23","1325"],["20","2138"],["20","1318"],["19","1303"],["15","1322"],["11","2137"],["9","1308"],["7","1317"],["7","1307"],["7","1312"],["6","1332"],["4","1302"],["3","3599"],["0",null]]',true);
			$item1 = json_decode('[["29392","3153"],["26259","3031"],["24706","2003"],["23495","2049"],["18224","3157"],["17753","3074"],["12468","3143"],["11928","3285"],["11561","3087"],["9654","3006"],["9234","3142"],["9116","3829"],["8845","3089"],["8552","3020"],["8401","3150"],["8304","3924"],["7704","3072"],["7304","3078"],["7187","3027"],["7179","3117"],["7098","3068"],["6267","1055"],["5938","3652"],["5899","1314"],["5720","1304"],["5672","3100"],["5625","3434"],["5408","2045"],["5347","1329"],["5065","1056"],["4827","3111"],["4678","3742"],["4628","2004"],["4553","3065"],["4479","3431"],["4423","1001"],["4370","2010"],["4355","3401"],["4178","3047"],["4111","3911"],["3990","3174"],["3879","3035"],["3822","3151"],["3801","3071"],["3720","3110"],["3649","3144"],["3415","1058"],["3323","1053"],["3308","3046"],["3129","3800"],["3121","3430"],["2934","3115"],["2881","1324"],["2811","2041"],["2759","1038"],["2755","3190"],["2741","1037"],["2667","1319"],["2459","3069"],["2415","3075"],["2349","3092"],["2172","3040"],["2127","3840"],["2101","3158"],["2063","3085"],["2036","1026"],["2021","3745"],["2017","1052"],["1997","3077"],["1943","3116"],["1930","3001"],["1905","3083"],["1869","3042"],["1847","3433"],["1754","3135"],["1733","3025"],["1702","1011"],["1630","3146"],["1522","3152"],["1426","1036"],["1417","1031"],["1402","3134"],["1401","3070"],["1401","3086"],["1390","3102"],["1388","3707"],["1369","1334"],["1359","3744"],["1312","3113"],["1275","3004"],["1243","3082"],["1237","3009"],["1235","3211"],["1233","1028"],["1215","3156"],["1194","3057"],["1096","3044"],["1082","3191"],["1026","1054"],["984","1029"],["973","3222"],["960","2044"],["943","3140"],["919","1300"],["855","2043"],["854","3930"],["826","3108"],["801","3067"],["798","3136"],["787","1042"],["760","3026"],["744","3139"],["720","1018"],["693","1309"],["693","3093"],["676","1043"],["669","3841"],["623","3155"],["587","3751"],["577","3028"],["562","1033"],["557","3024"],["553","3091"],["537","3003"],["524","3801"],["512","1301"],["488","3724"],["481","3931"],["472","1311"],["466","1326"],["463","3022"],["456","3710"],["424","3023"],["423","3709"],["416","3844"],["411","3010"],["410","3114"],["403","3041"],["396","1057"],["382","3725"],["376","3708"],["370","3508"],["362","3933"],["358","3097"],["351","3303"],["347","3512"],["337","3050"],["333","3198"],["324","3302"],["304","1306"],["287","1321"],["274","3504"],["271","3098"],["270","3060"],["269","1316"],["253","3717"],["247","3101"],["241","3105"],["218","3726"],["218","3145"],["218","3718"],["202","3723"],["198","1051"],["196","3301"],["193","1027"],["191","3172"],["170","3096"],["164","3706"],["147","3714"],["135","3716"],["131","1331"],["121","1310"],["117","1006"],["105","1004"],["92","1325"],["90","3197"],["90","1320"],["89","1039"],["81","3713"],["81","1315"],["76","1313"],["71","3124"],["65","3932"],["58","2053"],["57","1330"],["55","1327"],["55","3722"],["47","1305"],["46","3721"],["45","1333"],["43","2139"],["43","1328"],["43","1323"],["43","3715"],["41","2140"],["41","3196"],["40","3056"],["38","3141"],["31","1318"],["29","1303"],["25","1317"],["22","2138"],["20","3720"],["19","1322"],["19","1312"],["17","3719"],["17","1308"],["14","1302"],["13","1332"],["11","3711"],["10","1307"],["5","2137"],["3","3200"],["2","3599"],["0",null]]',true);
			$item2 = json_decode('[["20207","3006"],["17430","2049"],["15168","3020"],["14820","3031"],["14256","2003"],["13112","3153"],["12674","3087"],["12547","1304"],["11191","1314"],["10756","1001"],["10601","3285"],["9575","3143"],["9507","2004"],["9189","3089"],["8796","3117"],["8403","3157"],["7324","3111"],["7268","3074"],["7044","3072"],["6984","3068"],["6945","3829"],["6945","1329"],["6649","3078"],["6058","3652"],["5876","3142"],["5872","3047"],["5696","3035"],["5504","3065"],["5501","3742"],["5484","3150"],["5428","3924"],["5123","1055"],["5014","1053"],["4882","1324"],["4770","3046"],["4681","3100"],["4621","3071"],["4551","3110"],["4526","3027"],["4436","1058"],["4156","1056"],["4056","3158"],["4023","1052"],["3853","1319"],["3838","3434"],["3828","1037"],["3696","3151"],["3660","2045"],["3635","3431"],["3449","3911"],["3289","3075"],["3245","1038"],["3168","1026"],["2911","3174"],["2855","1011"],["2716","1334"],["2711","2010"],["2669","1036"],["2579","3430"],["2561","3115"],["2478","3086"],["2425","3800"],["2396","3116"],["2389","1028"],["2380","3135"],["2330","3401"],["2328","3190"],["2319","3001"],["2303","1031"],["2300","1300"],["2282","3085"],["2191","3144"],["2101","3083"],["2060","3433"],["2012","3113"],["1917","3211"],["1909","3102"],["1898","3707"],["1842","3025"],["1834","1029"],["1819","3009"],["1806","2044"],["1776","3082"],["1705","3044"],["1661","2041"],["1645","2043"],["1641","3134"],["1632","3057"],["1612","1042"],["1557","3745"],["1544","3156"],["1464","3191"],["1440","3092"],["1425","3744"],["1414","3070"],["1374","3069"],["1350","3930"],["1317","3067"],["1257","3108"],["1219","3840"],["1192","1043"],["1166","1018"],["1148","3093"],["1134","3136"],["1120","3077"],["1104","3040"],["1081","1033"],["1024","3152"],["1024","1309"],["1007","3026"],["964","3042"],["953","3751"],["933","3801"],["906","3155"],["900","1301"],["874","3222"],["849","1054"],["836","3024"],["830","3028"],["811","3091"],["810","1311"],["747","3004"],["739","3931"],["707","3114"],["701","3146"],["666","3022"],["659","3140"],["621","1057"],["589","3139"],["562","3010"],["539","3724"],["534","3710"],["534","3841"],["508","3725"],["500","3933"],["499","3041"],["460","3709"],["449","3303"],["445","1326"],["442","1321"],["416","1051"],["412","3023"],["408","3302"],["389","3708"],["386","1306"],["383","3198"],["382","3097"],["375","3101"],["369","3003"],["348","3504"],["337","3050"],["332","3098"],["327","3508"],["327","3512"],["327","3844"],["315","1027"],["311","1316"],["305","3172"],["289","3105"],["281","3145"],["275","3301"],["265","3060"],["264","3723"],["252","1006"],["252","3717"],["251","1331"],["245","1004"],["242","3718"],["223","3706"],["221","1310"],["206","3726"],["171","3096"],["169","3714"],["165","1313"],["158","1320"],["120","1330"],["115","1315"],["110","3197"],["105","3932"],["100","3716"],["96","1325"],["92","3713"],["90","3124"],["82","1327"],["74","3141"],["72","1305"],["72","1328"],["67","3715"],["66","2053"],["65","3196"],["65","1323"],["63","1333"],["57","1303"],["54","3722"],["49","3721"],["44","2140"],["44","3056"],["41","1039"],["37","2139"],["37","1312"],["33","1322"],["31","2138"],["28","1318"],["26","3719"],["25","1317"],["24","3200"],["20","1308"],["20","1302"],["16","1307"],["15","1332"],["15","3720"],["14","2137"],["9","3711"],["6","3599"],["0",null]]',true);
			$item3 = json_decode('[["17146","3006"],["15277","3020"],["14569","1001"],["13514","3031"],["13480","3087"],["11679","1314"],["11678","3117"],["11377","1304"],["10161","3285"],["9912","1055"],["9840","3089"],["9612","1329"],["8458","3035"],["7922","3072"],["7821","1056"],["7806","3111"],["7668","3065"],["7256","3068"],["7155","2003"],["6774","1052"],["6761","1053"],["6533","3652"],["6402","3046"],["6307","1058"],["6156","3742"],["6100","3078"],["6063","1037"],["6050","3110"],["5817","3047"],["5777","1324"],["5191","3071"],["5151","3158"],["5068","2049"],["4713","1026"],["4689","1319"],["4558","1011"],["4515","1036"],["4496","1028"],["4413","3100"],["4378","1038"],["4302","3075"],["3816","2004"],["3718","3086"],["3687","1031"],["3644","1334"],["3600","3027"],["3579","3151"],["3485","1029"],["3420","3431"],["3252","3135"],["3149","3116"],["3106","3143"],["3097","3211"],["2909","3082"],["2900","3001"],["2884","1042"],["2822","3102"],["2816","3113"],["2752","3707"],["2465","3174"],["2440","3153"],["2406","3083"],["2316","3430"],["2262","3067"],["2260","3085"],["2253","3433"],["2174","1300"],["2151","3057"],["2140","3044"],["2139","3025"],["2070","3156"],["2066","3115"],["2046","1033"],["1985","3930"],["1935","3157"],["1924","3924"],["1879","3009"],["1872","3134"],["1871","3191"],["1811","1043"],["1786","3434"],["1763","3108"],["1752","3829"],["1736","2043"],["1733","1018"],["1673","3150"],["1664","3093"],["1613","1054"],["1517","3801"],["1512","3744"],["1454","2010"],["1416","3024"],["1357","3074"],["1320","3751"],["1307","3155"],["1277","2044"],["1261","3136"],["1260","3026"],["1239","3070"],["1199","1309"],["1152","3911"],["1144","3931"],["1107","3091"],["1106","2045"],["1091","3114"],["973","3028"],["958","3142"],["942","1057"],["918","3144"],["896","3152"],["862","3302"],["859","3933"],["857","3303"],["842","3097"],["838","3022"],["830","1301"],["801","3190"],["786","3725"],["776","3724"],["743","3709"],["737","1051"],["733","1311"],["713","3010"],["704","3800"],["626","3098"],["574","3710"],["570","3745"],["553","1326"],["544","3708"],["539","1027"],["533","3504"],["521","2041"],["507","3041"],["500","1321"],["496","1006"],["460","3401"],["457","1004"],["450","3101"],["449","3004"],["433","3723"],["430","1306"],["427","3301"],["415","3717"],["409","3105"],["401","3077"],["362","3172"],["359","3096"],["357","3198"],["346","3508"],["344","1316"],["334","3092"],["309","1331"],["305","3069"],["295","3706"],["287","3145"],["282","3714"],["259","3718"],["253","3726"],["253","3841"],["251","3050"],["250","3840"],["221","1310"],["220","3023"],["218","3222"],["217","3003"],["203","3042"],["199","3844"],["190","3040"],["187","3146"],["186","1313"],["182","3512"],["172","1327"],["169","1320"],["166","3716"],["161","3932"],["151","1330"],["147","3713"],["147","3060"],["138","1315"],["134","2053"],["120","3197"],["119","3124"],["118","3140"],["111","1333"],["110","1325"],["106","3139"],["103","1328"],["92","3721"],["86","1323"],["84","3196"],["71","1318"],["66","1303"],["65","3141"],["64","3715"],["56","1305"],["53","3722"],["51","1039"],["46","1312"],["44","1332"],["40","1322"],["36","1317"],["36","3719"],["31","2138"],["30","2139"],["28","1307"],["26","3720"],["24","2140"],["22","3056"],["20","1308"],["18","3711"],["17","3200"],["9","1302"],["8","2137"],["0",null]]',true);
			$item4 = json_decode('[["12109","3035"],["11120","1052"],["10036","1001"],["10015","3031"],["9654","1058"],["9550","3087"],["9447","1037"],["8795","1053"],["8281","1028"],["8281","3072"],["8087","3020"],["7901","3006"],["7784","3285"],["7539","1026"],["7288","3065"],["7248","3089"],["7162","1036"],["6975","3117"],["6839","1011"],["6545","1314"],["6268","1038"],["6188","1329"],["6165","1029"],["6164","1055"],["5377","1304"],["5337","3110"],["5320","3068"],["5308","2003"],["5218","1031"],["5142","3046"],["5137","3652"],["5017","3742"],["4984","1056"],["4864","3075"],["4622","1042"],["4521","3211"],["4304","3135"],["4167","3086"],["4104","3078"],["4054","3111"],["4030","3082"],["3905","3071"],["3687","3102"],["3509","1033"],["3451","3067"],["3362","1324"],["3266","3113"],["3164","3100"],["3145","1018"],["3023","3158"],["2917","3047"],["2822","3116"],["2786","2004"],["2710","3431"],["2678","3001"],["2650","1319"],["2629","3151"],["2375","3044"],["2360","3057"],["2294","3027"],["2285","3083"],["2197","1334"],["2183","3093"],["2181","3191"],["2169","3108"],["2132","3801"],["2111","1043"],["2108","3143"],["1996","3433"],["1981","3026"],["1894","3707"],["1878","3156"],["1756","3024"],["1750","2043"],["1734","3085"],["1729","3430"],["1642","1057"],["1630","3134"],["1627","3174"],["1542","3025"],["1540","3751"],["1482","3930"],["1416","3136"],["1381","3155"],["1345","3744"],["1328","3924"],["1313","3115"],["1302","1051"],["1258","3434"],["1256","3114"],["1155","1300"],["1146","2049"],["1119","2044"],["1086","3153"],["1072","2010"],["1049","3028"],["1044","3157"],["1002","1054"],["981","3829"],["965","3150"],["916","3009"],["896","3070"],["864","1027"],["835","3911"],["823","3091"],["808","3931"],["775","3144"],["743","1006"],["727","3010"],["711","3022"],["658","1309"],["651","3724"],["637","3152"],["622","1004"],["616","3933"],["588","3725"],["577","3105"],["571","3074"],["547","3190"],["532","3142"],["513","3041"],["508","3709"],["494","3101"],["481","3302"],["465","3097"],["465","3303"],["464","3504"],["423","3098"],["412","1311"],["385","3172"],["371","3708"],["361","1301"],["352","1326"],["342","3745"],["339","3723"],["330","3800"],["326","3508"],["318","3198"],["316","3710"],["312","3077"],["282","1321"],["271","3145"],["268","3717"],["265","2045"],["253","2041"],["251","3004"],["232","3301"],["213","3096"],["204","1306"],["196","1316"],["190","1331"],["189","3841"],["177","2053"],["171","3401"],["167","3714"],["167","3844"],["155","3092"],["150","3003"],["150","3706"],["148","3718"],["145","3023"],["144","3050"],["141","3512"],["140","3726"],["139","3222"],["135","1327"],["132","1310"],["118","3932"],["112","1313"],["107","3124"],["105","3069"],["102","3140"],["100","3840"],["97","3042"],["96","3713"],["96","1315"],["94","3139"],["94","3197"],["93","1320"],["93","1330"],["93","3716"],["90","3141"],["87","3040"],["84","1333"],["73","1328"],["72","3060"],["66","3146"],["61","3196"],["60","2139"],["55","1323"],["54","1325"],["48","2138"],["45","3721"],["43","3715"],["42","2140"],["42","1305"],["41","1039"],["37","1322"],["35","3722"],["33","1332"],["30","1318"],["29","1303"],["24","1317"],["24","3720"],["22","1312"],["17","3719"],["14","1308"],["14","3056"],["13","2137"],["13","1302"],["13","1307"],["12","3200"],["6","3711"],["4","3599"],["0",null]]',true);
			$item5 = json_decode('[["11543","1052"],["10953","1058"],["10325","1028"],["10040","1037"],["8349","1026"],["7821","1029"],["7766","3035"],["7485","1036"],["7315","1038"],["7077","1011"],["6610","1053"],["6495","1001"],["6459","1031"],["4853","3006"],["4745","3020"],["4542","3031"],["4453","1042"],["4292","3117"],["4112","1314"],["3962","1033"],["3907","3211"],["3900","1329"],["3686","1055"],["3619","1304"],["3600","1018"],["3581","3067"],["3434","3082"],["3274","3072"],["3228","2003"],["3209","3075"],["3183","3026"],["3180","3087"],["3045","3089"],["3004","3065"],["2922","3086"],["2795","1056"],["2694","3285"],["2597","3135"],["2580","1057"],["2562","3113"],["2453","3652"],["2425","3102"],["2314","3111"],["2215","1324"],["2185","3110"],["2166","3742"],["2086","3046"],["2017","3801"],["1952","3158"],["1875","2004"],["1863","3068"],["1819","2049"],["1766","3078"],["1765","3108"],["1746","2043"],["1702","3044"],["1699","3057"],["1698","3071"],["1650","1319"],["1646","3191"],["1638","3047"],["1636","1043"],["1632","3093"],["1597","1334"],["1423","3024"],["1418","3116"],["1404","1051"],["1394","3083"],["1367","3001"],["1149","3151"],["1142","3751"],["1138","3114"],["1102","3100"],["1093","3153"],["1077","3433"],["1056","3143"],["1053","3431"],["1019","2044"],["983","3027"],["981","1300"],["973","1027"],["969","3136"],["969","3156"],["961","3924"],["944","3155"],["915","3157"],["894","3134"],["890","3707"],["819","3085"],["817","3028"],["806","3930"],["801","1006"],["764","2010"],["748","3829"],["711","3430"],["693","1004"],["691","3744"],["663","3174"],["653","3150"],["648","3434"],["600","3144"],["569","3911"],["557","3025"],["554","3074"],["529","1054"],["508","3010"],["507","3115"],["470","3070"],["454","3142"],["451","3009"],["430","3931"],["414","3105"],["410","3022"],["409","3101"],["365","1309"],["360","2045"],["340","3091"],["340","1311"],["327","3041"],["323","3725"],["309","3152"],["306","3933"],["305","1301"],["283","3709"],["277","3190"],["272","3303"],["271","3724"],["260","3172"],["241","1326"],["241","3077"],["240","1321"],["230","3302"],["223","3708"],["221","3145"],["218","3745"],["206","3097"],["205","3198"],["204","3508"],["203","3504"],["200","3140"],["194","2041"],["191","2053"],["189","3841"],["186","3800"],["184","3098"],["173","1316"],["166","3401"],["163","3723"],["150","3844"],["150","1306"],["149","1331"],["147","3710"],["126","3050"],["126","3717"],["125","2140"],["121","3840"],["120","2139"],["116","3069"],["111","3139"],["110","3004"],["109","3301"],["106","1310"],["101","2138"],["99","3512"],["98","3096"],["96","3092"],["93","1313"],["86","1320"],["85","1327"],["81","1330"],["79","3706"],["78","3042"],["77","3146"],["76","3718"],["71","3222"],["69","3040"],["66","3714"],["65","3726"],["63","3124"],["61","1328"],["60","3141"],["59","1315"],["58","3713"],["57","1333"],["53","3932"],["52","3060"],["47","3196"],["46","3023"],["43","3716"],["43","3197"],["39","1325"],["38","1323"],["35","3003"],["32","1305"],["32","1318"],["31","3599"],["31","3715"],["30","3721"],["21","1039"],["21","1322"],["20","3722"],["19","2137"],["17","1332"],["17","1317"],["15","3720"],["12","1312"],["11","3200"],["8","1302"],["8","1303"],["7","1307"],["7","3056"],["6","1308"],["6","3711"],["3","3719"],["0",null]]',true);
			$item6 = json_decode('[["402812","3340"],["51288","3341"],["37688","3361"],["21946","3364"],["12324","3362"],["9370","3342"],["5814","3363"],["0",null]]',true);
			
			$item = array();

			foreach ($item6 as $key => $v) {
				foreach ($v as $val){
					$hue = (isset($hue)) ? '{"'.$val.'":"'.$hue.'"}' : $val;
				}
				if(isset($item[$key])) {
					foreach ($item[$key] as $id => $count) {
						foreach (json_decode($hue,true) as $id2 => $count2) {
							if($id == $id2){
								$newcount = $count + $count2;
								$item[$key] = json_decode('{"'.$id.'":"'.$newcount.'"}',true);
							}
						}
					}
				} else {
					$item[$key] = json_decode($hue,true); 
				}
				unset($hue);
			}
				print '$'."item26 = json_decode('".json_encode($item)."',true);<br>";
				unset($item);
			exit;

			$item20 = json_decode('[{"1055":"46198"},{"1056":"31203"},{"3153":"27173"},{"3157":"16180"},{"3074":"15959"},{"3401":"13238"},{"3031":"13231"},{"2041":"12199"},{"3707":"11901"},{"2049":"10773"},{"2003":"9958"},{"3143":"8498"},{"1054":"8461"},{"3069":"8308"},{"3092":"8133"},{"3829":"7705"},{"3089":"7588"},{"3072":"7574"},{"3150":"7451"},{"3924":"7435"},{"3142":"7108"},{"3285":"6843"},{"3930":"6706"},{"3087":"6204"},{"3020":"5107"},{"3840":"4865"},{"3725":"4712"},{"3006":"4704"},{"3724":"4606"},{"3709":"4554"},{"1314":"4523"},{"3434":"4378"},{"3068":"4204"},{"3035":"4071"},{"3078":"3965"},{"3710":"3957"},{"1304":"3707"},{"3931":"3626"},{"3027":"3484"},{"3708":"3314"},{"3198":"3270"},{"3144":"3192"},{"3303":"3037"},{"3933":"2996"},{"3302":"2940"},{"3742":"2875"},{"1058":"2865"},{"3100":"2767"},{"3071":"2756"},{"3911":"2750"},{"3652":"2748"},{"3097":"2745"},{"3717":"2698"},{"3046":"2669"},{"1038":"2584"},{"3065":"2570"},{"2045":"2441"},{"3431":"2424"},{"3111":"2311"},{"3040":"2291"},{"3151":"2246"},{"3110":"2202"},{"1053":"2196"},{"1329":"2195"},{"3098":"2154"},{"1001":"2129"},{"3117":"2116"},{"3800":"2034"},{"3726":"1971"},{"3174":"1906"},{"1037":"1854"},{"3718":"1845"},{"3706":"1812"},{"3301":"1793"},{"2010":"1791"},{"1324":"1745"},{"3077":"1739"},{"3430":"1728"},{"3047":"1685"},{"3135":"1657"},{"3075":"1654"},{"3116":"1646"},{"3146":"1637"},{"1026":"1599"},{"3190":"1589"},{"3042":"1580"},{"2004":"1568"},{"3134":"1525"},{"3723":"1517"},{"3152":"1414"},{"3745":"1376"},{"3085":"1373"},{"3096":"1367"},{"3115":"1322"},{"3026":"1300"},{"1319":"1287"},{"3158":"1263"},{"1052":"1254"},{"3083":"1238"},{"3841":"1223"},{"3102":"1145"},{"1011":"1141"},{"3001":"1079"},{"3433":"1058"},{"3025":"1045"},{"1036":"1015"},{"1031":"1005"},{"3714":"1003"},{"1334":"997"},{"3156":"964"},{"3070":"893"},{"3197":"830"},{"3086":"813"},{"3191":"813"},{"3211":"776"},{"3082":"764"},{"1028":"758"},{"1029":"738"},{"3004":"730"},{"2043":"701"},{"3713":"699"},{"1039":"696"},{"3716":"692"},{"3140":"683"},{"3044":"677"},{"3139":"675"},{"1300":"672"},{"3113":"669"},{"2044":"627"},{"3744":"586"},{"1018":"583"},{"3057":"567"},{"3844":"560"},{"3222":"552"},{"3196":"552"},{"3721":"544"},{"3932":"527"},{"3009":"516"},{"3136":"510"},{"3155":"493"},{"3722":"490"},{"1057":"471"},{"3067":"464"},{"3715":"426"},{"1042":"418"},{"3108":"407"},{"3003":"405"},{"1309":"397"},{"1033":"380"},{"1043":"376"},{"1311":"365"},{"3093":"365"},{"3022":"340"},{"1301":"330"},{"3508":"326"},{"3751":"317"},{"3512":"297"},{"3024":"291"},{"3801":"280"},{"3023":"273"},{"3028":"266"},{"3041":"251"},{"3720":"229"},{"3060":"220"},{"3010":"215"},{"1306":"206"},{"3050":"204"},{"3091":"195"},{"3114":"186"},{"1326":"186"},{"1321":"179"},{"3200":"170"},{"3145":"165"},{"3172":"161"},{"3101":"156"},{"3719":"144"},{"3105":"135"},{"3504":"119"},{"1027":"117"},{"3711":"114"},{"1051":"112"},{"1331":"111"},{"1316":"103"},{"1310":"86"},{"1313":"66"},{"1320":"53"},{"1004":"48"},{"2053":"46"},{"3056":"46"},{"1330":"44"},{"1006":"43"},{"1333":"38"},{"3124":"37"},{"3141":"37"},{"1315":"34"},{"1327":"31"},{"1323":"30"},{"2139":"29"},{"2140":"27"},{"1305":"24"},{"1328":"23"},{"1325":"23"},{"2138":"20"},{"1318":"20"},{"1303":"19"},{"1322":"15"},{"2137":"11"},{"1308":"9"},{"1317":"7"},{"1307":"7"},{"1312":"7"},{"1332":"6"},{"1302":"4"},{"3599":"3"},{"":"0"}]',true);
			$item21 = json_decode('[{"3153":"29392"},{"3031":"26259"},{"2003":"24706"},{"2049":"23495"},{"3157":"18224"},{"3074":"17753"},{"3143":"12468"},{"3285":"11928"},{"3087":"11561"},{"3006":"9654"},{"3142":"9234"},{"3829":"9116"},{"3089":"8845"},{"3020":"8552"},{"3150":"8401"},{"3924":"8304"},{"3072":"7704"},{"3078":"7304"},{"3027":"7187"},{"3117":"7179"},{"3068":"7098"},{"1055":"6267"},{"3652":"5938"},{"1314":"5899"},{"1304":"5720"},{"3100":"5672"},{"3434":"5625"},{"2045":"5408"},{"1329":"5347"},{"1056":"5065"},{"3111":"4827"},{"3742":"4678"},{"2004":"4628"},{"3065":"4553"},{"3431":"4479"},{"1001":"4423"},{"2010":"4370"},{"3401":"4355"},{"3047":"4178"},{"3911":"4111"},{"3174":"3990"},{"3035":"3879"},{"3151":"3822"},{"3071":"3801"},{"3110":"3720"},{"3144":"3649"},{"1058":"3415"},{"1053":"3323"},{"3046":"3308"},{"3800":"3129"},{"3430":"3121"},{"3115":"2934"},{"1324":"2881"},{"2041":"2811"},{"1038":"2759"},{"3190":"2755"},{"1037":"2741"},{"1319":"2667"},{"3069":"2459"},{"3075":"2415"},{"3092":"2349"},{"3040":"2172"},{"3840":"2127"},{"3158":"2101"},{"3085":"2063"},{"1026":"2036"},{"3745":"2021"},{"1052":"2017"},{"3077":"1997"},{"3116":"1943"},{"3001":"1930"},{"3083":"1905"},{"3042":"1869"},{"3433":"1847"},{"3135":"1754"},{"3025":"1733"},{"1011":"1702"},{"3146":"1630"},{"3152":"1522"},{"1036":"1426"},{"1031":"1417"},{"3134":"1402"},{"3070":"1401"},{"3086":"1401"},{"3102":"1390"},{"3707":"1388"},{"1334":"1369"},{"3744":"1359"},{"3113":"1312"},{"3004":"1275"},{"3082":"1243"},{"3009":"1237"},{"3211":"1235"},{"1028":"1233"},{"3156":"1215"},{"3057":"1194"},{"3044":"1096"},{"3191":"1082"},{"1054":"1026"},{"1029":"984"},{"3222":"973"},{"2044":"960"},{"3140":"943"},{"1300":"919"},{"2043":"855"},{"3930":"854"},{"3108":"826"},{"3067":"801"},{"3136":"798"},{"1042":"787"},{"3026":"760"},{"3139":"744"},{"1018":"720"},{"1309":"693"},{"3093":"693"},{"1043":"676"},{"3841":"669"},{"3155":"623"},{"3751":"587"},{"3028":"577"},{"1033":"562"},{"3024":"557"},{"3091":"553"},{"3003":"537"},{"3801":"524"},{"1301":"512"},{"3724":"488"},{"3931":"481"},{"1311":"472"},{"1326":"466"},{"3022":"463"},{"3710":"456"},{"3023":"424"},{"3709":"423"},{"3844":"416"},{"3010":"411"},{"3114":"410"},{"3041":"403"},{"1057":"396"},{"3725":"382"},{"3708":"376"},{"3508":"370"},{"3933":"362"},{"3097":"358"},{"3303":"351"},{"3512":"347"},{"3050":"337"},{"3198":"333"},{"3302":"324"},{"1306":"304"},{"1321":"287"},{"3504":"274"},{"3098":"271"},{"3060":"270"},{"1316":"269"},{"3717":"253"},{"3101":"247"},{"3105":"241"},{"3726":"218"},{"3145":"218"},{"3718":"218"},{"3723":"202"},{"1051":"198"},{"3301":"196"},{"1027":"193"},{"3172":"191"},{"3096":"170"},{"3706":"164"},{"3714":"147"},{"3716":"135"},{"1331":"131"},{"1310":"121"},{"1006":"117"},{"1004":"105"},{"1325":"92"},{"3197":"90"},{"1320":"90"},{"1039":"89"},{"3713":"81"},{"1315":"81"},{"1313":"76"},{"3124":"71"},{"3932":"65"},{"2053":"58"},{"1330":"57"},{"1327":"55"},{"3722":"55"},{"1305":"47"},{"3721":"46"},{"1333":"45"},{"2139":"43"},{"1328":"43"},{"1323":"43"},{"3715":"43"},{"2140":"41"},{"3196":"41"},{"3056":"40"},{"3141":"38"},{"1318":"31"},{"1303":"29"},{"1317":"25"},{"2138":"22"},{"3720":"20"},{"1322":"19"},{"1312":"19"},{"3719":"17"},{"1308":"17"},{"1302":"14"},{"1332":"13"},{"3711":"11"},{"1307":"10"},{"2137":"5"},{"3200":"3"},{"3599":"2"},{"":"0"}]',true);
			$item22 = json_decode('[{"3006":"20207"},{"2049":"17430"},{"3020":"15168"},{"3031":"14820"},{"2003":"14256"},{"3153":"13112"},{"3087":"12674"},{"1304":"12547"},{"1314":"11191"},{"1001":"10756"},{"3285":"10601"},{"3143":"9575"},{"2004":"9507"},{"3089":"9189"},{"3117":"8796"},{"3157":"8403"},{"3111":"7324"},{"3074":"7268"},{"3072":"7044"},{"3068":"6984"},{"3829":"6945"},{"1329":"6945"},{"3078":"6649"},{"3652":"6058"},{"3142":"5876"},{"3047":"5872"},{"3035":"5696"},{"3065":"5504"},{"3742":"5501"},{"3150":"5484"},{"3924":"5428"},{"1055":"5123"},{"1053":"5014"},{"1324":"4882"},{"3046":"4770"},{"3100":"4681"},{"3071":"4621"},{"3110":"4551"},{"3027":"4526"},{"1058":"4436"},{"1056":"4156"},{"3158":"4056"},{"1052":"4023"},{"1319":"3853"},{"3434":"3838"},{"1037":"3828"},{"3151":"3696"},{"2045":"3660"},{"3431":"3635"},{"3911":"3449"},{"3075":"3289"},{"1038":"3245"},{"1026":"3168"},{"3174":"2911"},{"1011":"2855"},{"1334":"2716"},{"2010":"2711"},{"1036":"2669"},{"3430":"2579"},{"3115":"2561"},{"3086":"2478"},{"3800":"2425"},{"3116":"2396"},{"1028":"2389"},{"3135":"2380"},{"3401":"2330"},{"3190":"2328"},{"3001":"2319"},{"1031":"2303"},{"1300":"2300"},{"3085":"2282"},{"3144":"2191"},{"3083":"2101"},{"3433":"2060"},{"3113":"2012"},{"3211":"1917"},{"3102":"1909"},{"3707":"1898"},{"3025":"1842"},{"1029":"1834"},{"3009":"1819"},{"2044":"1806"},{"3082":"1776"},{"3044":"1705"},{"2041":"1661"},{"2043":"1645"},{"3134":"1641"},{"3057":"1632"},{"1042":"1612"},{"3745":"1557"},{"3156":"1544"},{"3191":"1464"},{"3092":"1440"},{"3744":"1425"},{"3070":"1414"},{"3069":"1374"},{"3930":"1350"},{"3067":"1317"},{"3108":"1257"},{"3840":"1219"},{"1043":"1192"},{"1018":"1166"},{"3093":"1148"},{"3136":"1134"},{"3077":"1120"},{"3040":"1104"},{"1033":"1081"},{"3152":"1024"},{"1309":"1024"},{"3026":"1007"},{"3042":"964"},{"3751":"953"},{"3801":"933"},{"3155":"906"},{"1301":"900"},{"3222":"874"},{"1054":"849"},{"3024":"836"},{"3028":"830"},{"3091":"811"},{"1311":"810"},{"3004":"747"},{"3931":"739"},{"3114":"707"},{"3146":"701"},{"3022":"666"},{"3140":"659"},{"1057":"621"},{"3139":"589"},{"3010":"562"},{"3724":"539"},{"3710":"534"},{"3841":"534"},{"3725":"508"},{"3933":"500"},{"3041":"499"},{"3709":"460"},{"3303":"449"},{"1326":"445"},{"1321":"442"},{"1051":"416"},{"3023":"412"},{"3302":"408"},{"3708":"389"},{"1306":"386"},{"3198":"383"},{"3097":"382"},{"3101":"375"},{"3003":"369"},{"3504":"348"},{"3050":"337"},{"3098":"332"},{"3508":"327"},{"3512":"327"},{"3844":"327"},{"1027":"315"},{"1316":"311"},{"3172":"305"},{"3105":"289"},{"3145":"281"},{"3301":"275"},{"3060":"265"},{"3723":"264"},{"1006":"252"},{"3717":"252"},{"1331":"251"},{"1004":"245"},{"3718":"242"},{"3706":"223"},{"1310":"221"},{"3726":"206"},{"3096":"171"},{"3714":"169"},{"1313":"165"},{"1320":"158"},{"1330":"120"},{"1315":"115"},{"3197":"110"},{"3932":"105"},{"3716":"100"},{"1325":"96"},{"3713":"92"},{"3124":"90"},{"1327":"82"},{"3141":"74"},{"1305":"72"},{"1328":"72"},{"3715":"67"},{"2053":"66"},{"3196":"65"},{"1323":"65"},{"1333":"63"},{"1303":"57"},{"3722":"54"},{"3721":"49"},{"2140":"44"},{"3056":"44"},{"1039":"41"},{"2139":"37"},{"1312":"37"},{"1322":"33"},{"2138":"31"},{"1318":"28"},{"3719":"26"},{"1317":"25"},{"3200":"24"},{"1308":"20"},{"1302":"20"},{"1307":"16"},{"1332":"15"},{"3720":"15"},{"2137":"14"},{"3711":"9"},{"3599":"6"},{"":"0"}]',true);
			$item23 = json_decode('[{"3006":"17146"},{"3020":"15277"},{"1001":"14569"},{"3031":"13514"},{"3087":"13480"},{"1314":"11679"},{"3117":"11678"},{"1304":"11377"},{"3285":"10161"},{"1055":"9912"},{"3089":"9840"},{"1329":"9612"},{"3035":"8458"},{"3072":"7922"},{"1056":"7821"},{"3111":"7806"},{"3065":"7668"},{"3068":"7256"},{"2003":"7155"},{"1052":"6774"},{"1053":"6761"},{"3652":"6533"},{"3046":"6402"},{"1058":"6307"},{"3742":"6156"},{"3078":"6100"},{"1037":"6063"},{"3110":"6050"},{"3047":"5817"},{"1324":"5777"},{"3071":"5191"},{"3158":"5151"},{"2049":"5068"},{"1026":"4713"},{"1319":"4689"},{"1011":"4558"},{"1036":"4515"},{"1028":"4496"},{"3100":"4413"},{"1038":"4378"},{"3075":"4302"},{"2004":"3816"},{"3086":"3718"},{"1031":"3687"},{"1334":"3644"},{"3027":"3600"},{"3151":"3579"},{"1029":"3485"},{"3431":"3420"},{"3135":"3252"},{"3116":"3149"},{"3143":"3106"},{"3211":"3097"},{"3082":"2909"},{"3001":"2900"},{"1042":"2884"},{"3102":"2822"},{"3113":"2816"},{"3707":"2752"},{"3174":"2465"},{"3153":"2440"},{"3083":"2406"},{"3430":"2316"},{"3067":"2262"},{"3085":"2260"},{"3433":"2253"},{"1300":"2174"},{"3057":"2151"},{"3044":"2140"},{"3025":"2139"},{"3156":"2070"},{"3115":"2066"},{"1033":"2046"},{"3930":"1985"},{"3157":"1935"},{"3924":"1924"},{"3009":"1879"},{"3134":"1872"},{"3191":"1871"},{"1043":"1811"},{"3434":"1786"},{"3108":"1763"},{"3829":"1752"},{"2043":"1736"},{"1018":"1733"},{"3150":"1673"},{"3093":"1664"},{"1054":"1613"},{"3801":"1517"},{"3744":"1512"},{"2010":"1454"},{"3024":"1416"},{"3074":"1357"},{"3751":"1320"},{"3155":"1307"},{"2044":"1277"},{"3136":"1261"},{"3026":"1260"},{"3070":"1239"},{"1309":"1199"},{"3911":"1152"},{"3931":"1144"},{"3091":"1107"},{"2045":"1106"},{"3114":"1091"},{"3028":"973"},{"3142":"958"},{"1057":"942"},{"3144":"918"},{"3152":"896"},{"3302":"862"},{"3933":"859"},{"3303":"857"},{"3097":"842"},{"3022":"838"},{"1301":"830"},{"3190":"801"},{"3725":"786"},{"3724":"776"},{"3709":"743"},{"1051":"737"},{"1311":"733"},{"3010":"713"},{"3800":"704"},{"3098":"626"},{"3710":"574"},{"3745":"570"},{"1326":"553"},{"3708":"544"},{"1027":"539"},{"3504":"533"},{"2041":"521"},{"3041":"507"},{"1321":"500"},{"1006":"496"},{"3401":"460"},{"1004":"457"},{"3101":"450"},{"3004":"449"},{"3723":"433"},{"1306":"430"},{"3301":"427"},{"3717":"415"},{"3105":"409"},{"3077":"401"},{"3172":"362"},{"3096":"359"},{"3198":"357"},{"3508":"346"},{"1316":"344"},{"3092":"334"},{"1331":"309"},{"3069":"305"},{"3706":"295"},{"3145":"287"},{"3714":"282"},{"3718":"259"},{"3726":"253"},{"3841":"253"},{"3050":"251"},{"3840":"250"},{"1310":"221"},{"3023":"220"},{"3222":"218"},{"3003":"217"},{"3042":"203"},{"3844":"199"},{"3040":"190"},{"3146":"187"},{"1313":"186"},{"3512":"182"},{"1327":"172"},{"1320":"169"},{"3716":"166"},{"3932":"161"},{"1330":"151"},{"3713":"147"},{"3060":"147"},{"1315":"138"},{"2053":"134"},{"3197":"120"},{"3124":"119"},{"3140":"118"},{"1333":"111"},{"1325":"110"},{"3139":"106"},{"1328":"103"},{"3721":"92"},{"1323":"86"},{"3196":"84"},{"1318":"71"},{"1303":"66"},{"3141":"65"},{"3715":"64"},{"1305":"56"},{"3722":"53"},{"1039":"51"},{"1312":"46"},{"1332":"44"},{"1322":"40"},{"1317":"36"},{"3719":"36"},{"2138":"31"},{"2139":"30"},{"1307":"28"},{"3720":"26"},{"2140":"24"},{"3056":"22"},{"1308":"20"},{"3711":"18"},{"3200":"17"},{"1302":"9"},{"2137":"8"},{"":"0"}]',true);
			$item24 = json_decode('[{"3035":"12109"},{"1052":"11120"},{"1001":"10036"},{"3031":"10015"},{"1058":"9654"},{"3087":"9550"},{"1037":"9447"},{"1053":"8795"},{"1028":"8281"},{"3072":"8281"},{"3020":"8087"},{"3006":"7901"},{"3285":"7784"},{"1026":"7539"},{"3065":"7288"},{"3089":"7248"},{"1036":"7162"},{"3117":"6975"},{"1011":"6839"},{"1314":"6545"},{"1038":"6268"},{"1329":"6188"},{"1029":"6165"},{"1055":"6164"},{"1304":"5377"},{"3110":"5337"},{"3068":"5320"},{"2003":"5308"},{"1031":"5218"},{"3046":"5142"},{"3652":"5137"},{"3742":"5017"},{"1056":"4984"},{"3075":"4864"},{"1042":"4622"},{"3211":"4521"},{"3135":"4304"},{"3086":"4167"},{"3078":"4104"},{"3111":"4054"},{"3082":"4030"},{"3071":"3905"},{"3102":"3687"},{"1033":"3509"},{"3067":"3451"},{"1324":"3362"},{"3113":"3266"},{"3100":"3164"},{"1018":"3145"},{"3158":"3023"},{"3047":"2917"},{"3116":"2822"},{"2004":"2786"},{"3431":"2710"},{"3001":"2678"},{"1319":"2650"},{"3151":"2629"},{"3044":"2375"},{"3057":"2360"},{"3027":"2294"},{"3083":"2285"},{"1334":"2197"},{"3093":"2183"},{"3191":"2181"},{"3108":"2169"},{"3801":"2132"},{"1043":"2111"},{"3143":"2108"},{"3433":"1996"},{"3026":"1981"},{"3707":"1894"},{"3156":"1878"},{"3024":"1756"},{"2043":"1750"},{"3085":"1734"},{"3430":"1729"},{"1057":"1642"},{"3134":"1630"},{"3174":"1627"},{"3025":"1542"},{"3751":"1540"},{"3930":"1482"},{"3136":"1416"},{"3155":"1381"},{"3744":"1345"},{"3924":"1328"},{"3115":"1313"},{"1051":"1302"},{"3434":"1258"},{"3114":"1256"},{"1300":"1155"},{"2049":"1146"},{"2044":"1119"},{"3153":"1086"},{"2010":"1072"},{"3028":"1049"},{"3157":"1044"},{"1054":"1002"},{"3829":"981"},{"3150":"965"},{"3009":"916"},{"3070":"896"},{"1027":"864"},{"3911":"835"},{"3091":"823"},{"3931":"808"},{"3144":"775"},{"1006":"743"},{"3010":"727"},{"3022":"711"},{"1309":"658"},{"3724":"651"},{"3152":"637"},{"1004":"622"},{"3933":"616"},{"3725":"588"},{"3105":"577"},{"3074":"571"},{"3190":"547"},{"3142":"532"},{"3041":"513"},{"3709":"508"},{"3101":"494"},{"3302":"481"},{"3097":"465"},{"3303":"465"},{"3504":"464"},{"3098":"423"},{"1311":"412"},{"3172":"385"},{"3708":"371"},{"1301":"361"},{"1326":"352"},{"3745":"342"},{"3723":"339"},{"3800":"330"},{"3508":"326"},{"3198":"318"},{"3710":"316"},{"3077":"312"},{"1321":"282"},{"3145":"271"},{"3717":"268"},{"2045":"265"},{"2041":"253"},{"3004":"251"},{"3301":"232"},{"3096":"213"},{"1306":"204"},{"1316":"196"},{"1331":"190"},{"3841":"189"},{"2053":"177"},{"3401":"171"},{"3714":"167"},{"3844":"167"},{"3092":"155"},{"3003":"150"},{"3706":"150"},{"3718":"148"},{"3023":"145"},{"3050":"144"},{"3512":"141"},{"3726":"140"},{"3222":"139"},{"1327":"135"},{"1310":"132"},{"3932":"118"},{"1313":"112"},{"3124":"107"},{"3069":"105"},{"3140":"102"},{"3840":"100"},{"3042":"97"},{"3713":"96"},{"1315":"96"},{"3139":"94"},{"3197":"94"},{"1320":"93"},{"1330":"93"},{"3716":"93"},{"3141":"90"},{"3040":"87"},{"1333":"84"},{"1328":"73"},{"3060":"72"},{"3146":"66"},{"3196":"61"},{"2139":"60"},{"1323":"55"},{"1325":"54"},{"2138":"48"},{"3721":"45"},{"3715":"43"},{"2140":"42"},{"1305":"42"},{"1039":"41"},{"1322":"37"},{"3722":"35"},{"1332":"33"},{"1318":"30"},{"1303":"29"},{"1317":"24"},{"3720":"24"},{"1312":"22"},{"3719":"17"},{"1308":"14"},{"3056":"14"},{"2137":"13"},{"1302":"13"},{"1307":"13"},{"3200":"12"},{"3711":"6"},{"3599":"4"},{"":"0"}]',true);
			$item25 = json_decode('[{"1052":"11543"},{"1058":"10953"},{"1028":"10325"},{"1037":"10040"},{"1026":"8349"},{"1029":"7821"},{"3035":"7766"},{"1036":"7485"},{"1038":"7315"},{"1011":"7077"},{"1053":"6610"},{"1001":"6495"},{"1031":"6459"},{"3006":"4853"},{"3020":"4745"},{"3031":"4542"},{"1042":"4453"},{"3117":"4292"},{"1314":"4112"},{"1033":"3962"},{"3211":"3907"},{"1329":"3900"},{"1055":"3686"},{"1304":"3619"},{"1018":"3600"},{"3067":"3581"},{"3082":"3434"},{"3072":"3274"},{"2003":"3228"},{"3075":"3209"},{"3026":"3183"},{"3087":"3180"},{"3089":"3045"},{"3065":"3004"},{"3086":"2922"},{"1056":"2795"},{"3285":"2694"},{"3135":"2597"},{"1057":"2580"},{"3113":"2562"},{"3652":"2453"},{"3102":"2425"},{"3111":"2314"},{"1324":"2215"},{"3110":"2185"},{"3742":"2166"},{"3046":"2086"},{"3801":"2017"},{"3158":"1952"},{"2004":"1875"},{"3068":"1863"},{"2049":"1819"},{"3078":"1766"},{"3108":"1765"},{"2043":"1746"},{"3044":"1702"},{"3057":"1699"},{"3071":"1698"},{"1319":"1650"},{"3191":"1646"},{"3047":"1638"},{"1043":"1636"},{"3093":"1632"},{"1334":"1597"},{"3024":"1423"},{"3116":"1418"},{"1051":"1404"},{"3083":"1394"},{"3001":"1367"},{"3151":"1149"},{"3751":"1142"},{"3114":"1138"},{"3100":"1102"},{"3153":"1093"},{"3433":"1077"},{"3143":"1056"},{"3431":"1053"},{"2044":"1019"},{"3027":"983"},{"1300":"981"},{"1027":"973"},{"3136":"969"},{"3156":"969"},{"3924":"961"},{"3155":"944"},{"3157":"915"},{"3134":"894"},{"3707":"890"},{"3085":"819"},{"3028":"817"},{"3930":"806"},{"1006":"801"},{"2010":"764"},{"3829":"748"},{"3430":"711"},{"1004":"693"},{"3744":"691"},{"3174":"663"},{"3150":"653"},{"3434":"648"},{"3144":"600"},{"3911":"569"},{"3025":"557"},{"3074":"554"},{"1054":"529"},{"3010":"508"},{"3115":"507"},{"3070":"470"},{"3142":"454"},{"3009":"451"},{"3931":"430"},{"3105":"414"},{"3022":"410"},{"3101":"409"},{"1309":"365"},{"2045":"360"},{"3091":"340"},{"1311":"340"},{"3041":"327"},{"3725":"323"},{"3152":"309"},{"3933":"306"},{"1301":"305"},{"3709":"283"},{"3190":"277"},{"3303":"272"},{"3724":"271"},{"3172":"260"},{"1326":"241"},{"3077":"241"},{"1321":"240"},{"3302":"230"},{"3708":"223"},{"3145":"221"},{"3745":"218"},{"3097":"206"},{"3198":"205"},{"3508":"204"},{"3504":"203"},{"3140":"200"},{"2041":"194"},{"2053":"191"},{"3841":"189"},{"3800":"186"},{"3098":"184"},{"1316":"173"},{"3401":"166"},{"3723":"163"},{"3844":"150"},{"1306":"150"},{"1331":"149"},{"3710":"147"},{"3050":"126"},{"3717":"126"},{"2140":"125"},{"3840":"121"},{"2139":"120"},{"3069":"116"},{"3139":"111"},{"3004":"110"},{"3301":"109"},{"1310":"106"},{"2138":"101"},{"3512":"99"},{"3096":"98"},{"3092":"96"},{"1313":"93"},{"1320":"86"},{"1327":"85"},{"1330":"81"},{"3706":"79"},{"3042":"78"},{"3146":"77"},{"3718":"76"},{"3222":"71"},{"3040":"69"},{"3714":"66"},{"3726":"65"},{"3124":"63"},{"1328":"61"},{"3141":"60"},{"1315":"59"},{"3713":"58"},{"1333":"57"},{"3932":"53"},{"3060":"52"},{"3196":"47"},{"3023":"46"},{"3716":"43"},{"3197":"43"},{"1325":"39"},{"1323":"38"},{"3003":"35"},{"1305":"32"},{"1318":"32"},{"3599":"31"},{"3715":"31"},{"3721":"30"},{"1039":"21"},{"1322":"21"},{"3722":"20"},{"2137":"19"},{"1332":"17"},{"1317":"17"},{"3720":"15"},{"1312":"12"},{"3200":"11"},{"1302":"8"},{"1303":"8"},{"1307":"7"},{"3056":"7"},{"1308":"6"},{"3711":"6"},{"3719":"3"},{"":"0"}]',true);
			$item26 = json_decode('[{"3340":"402812"},{"3341":"51288"},{"3361":"37688"},{"3364":"21946"},{"3362":"12324"},{"3342":"9370"},{"3363":"5814"},{"":"0"}]',true);

			$item = array();

			foreach ($item20 as $v) {
				foreach ($v as $id => $val){
					$item[$id] = (isset($item[$id])) ? $val+$item[$id] : $val;
				}
			}
			foreach ($item21 as $v) {
				foreach ($v as $id => $val){
					$item[$id] = (isset($item[$id])) ? $val+$item[$id] : $val;
				}
			}
			foreach ($item22 as $v) {
				foreach ($v as $id => $val){
					$item[$id] = (isset($item[$id])) ? $val+$item[$id] : $val;
				}
			}
			foreach ($item23 as $v) {
				foreach ($v as $id => $val){
					$item[$id] = (isset($item[$id])) ? $val+$item[$id] : $val;
				}
			}
			foreach ($item24 as $v) {
				foreach ($v as $id => $val){
					$item[$id] = (isset($item[$id])) ? $val+$item[$id] : $val;
				}
			}
			foreach ($item25 as $v) {
				foreach ($v as $id => $val){
					$item[$id] = (isset($item[$id])) ? $val+$item[$id] : $val;
				}
			}
			print json_encode($item); 	
			exit;

			$items = json_decode('{"1055":77350,"1056":56024,"3153":74296,"3157":46701,"3074":43462,"3401":20720,"3031":82381,"2041":17639,"3707":20723,"2049":59731,"2003":64611,"3143":36811,"1054":13480,"3069":12667,"3092":12507,"3829":27247,"3089":45755,"3072":41799,"3150":24627,"3924":25380,"3142":24162,"3285":50011,"3930":13183,"3087":56649,"3020":56936,"3840":8682,"3725":7299,"3006":64465,"3724":7331,"3709":6971,"1314":43949,"3434":17533,"3068":32725,"3035":41979,"3078":29888,"3710":5984,"1304":42347,"3931":7228,"3027":22074,"3708":5217,"3198":4866,"3144":11325,"3303":5431,"3933":5639,"3302":5245,"3742":26393,"1058":37630,"3100":21799,"3071":21972,"3911":12866,"3652":28867,"3097":4998,"3717":4012,"3046":24377,"1038":26549,"3065":30587,"2045":13240,"3431":17721,"3111":28636,"3040":5913,"3151":17121,"3110":24045,"1053":32699,"1329":34187,"3098":3990,"1001":48408,"3117":41036,"3800":8808,"3726":2853,"3174":13562,"1037":33973,"3718":2788,"3706":2723,"3301":3032,"2010":12162,"1324":20862,"3077":5810,"3430":12184,"3047":22107,"3135":15944,"3075":19733,"3116":13374,"3146":4298,"1026":27404,"3190":8297,"3042":4791,"2004":24180,"3134":8964,"3723":2918,"3152":5802,"3745":6084,"3085":10531,"3096":2378,"3115":10703,"3026":9491,"1319":16796,"3158":17546,"1052":36731,"3083":11329,"3841":3057,"3102":13378,"1011":24172,"3001":12273,"3433":10291,"3025":8858,"1036":24272,"1031":20089,"3714":1834,"1334":12520,"3156":8640,"3070":6313,"3197":1287,"3086":15499,"3191":9057,"3211":15453,"3082":14156,"1028":27482,"1029":21027,"3004":3562,"2043":8433,"3713":1173,"1039":939,"3716":1229,"3140":2705,"3044":9695,"3139":2319,"1300":8201,"3113":12637,"2044":6808,"3744":6918,"1018":10947,"3057":9603,"3844":1819,"3222":2827,"3196":850,"3721":806,"3932":1029,"3009":6818,"3136":6088,"3155":5654,"3722":707,"1057":6652,"3067":11876,"3715":674,"1042":14776,"3108":8187,"3003":1713,"1309":4336,"1033":11540,"1043":7802,"1311":3132,"3093":7685,"3022":3428,"1301":3238,"3508":1899,"3751":5859,"3512":1393,"3024":6279,"3801":7403,"3023":1520,"3028":4512,"3041":2500,"3720":329,"3060":1026,"3010":3136,"1306":1680,"3050":1399,"3091":3829,"3114":4788,"1326":2243,"1321":1930,"3200":237,"3145":1443,"3172":1664,"3101":2131,"3719":243,"3105":2065,"3504":1941,"1027":3001,"3711":164,"1051":4169,"1331":1141,"1316":1396,"1310":887,"1313":698,"1320":649,"1004":2170,"2053":672,"3056":173,"1330":546,"1006":2452,"1333":398,"3124":487,"3141":364,"1315":523,"1327":560,"1323":317,"2139":319,"2140":303,"1305":273,"1328":375,"1325":414,"2138":253,"1318":212,"1303":208,"1322":165,"2137":70,"1308":86,"1317":134,"1307":81,"1312":143,"1332":128,"1302":68,"3599":46,"":0}',true);
			foreach ($items as $id => $val) {
				$values = (isset($values)) ? $values.",('$id','$val')" : "('$id','$val')"; 
			}
			$this->query = "INSERT INTO itemcount (id,count) VALUES $values";
			$this->execute_single_query();
			exit;
			*/

			$this->query = "SELECT id,count FROM itemcount ORDER BY count DESC $limit";
			$this->get_result_from_query();
			foreach ($this->rows as $v) {
				list($id,$count) = $v;
				$array[$id]['id'] = $id;
				$array[$id]['count'] = $count;
				$array[$id]['pickrate'] = round($count*100/$allgames/6,2);

				$json = file_get_contents("https://global.api.pvp.net/api/lol/static-data/lan/v1.2/item/$id?locale=en_US&version=5.14.1&".$this->conf->api_id);
				$itemarray = json_decode($json,true);
				if(isset($itemarray['name'])){
					$array[$id]['name'] = $itemarray['name'];
					$array[$id]['description'] = htmlentities($itemarray['description']);
					$array[$id]['plaintext'] = (isset($itemarray['plaintext'])) ? $itemarray['plaintext'] : '';
				} else {
					print "Error!";
					exit;
				}
			}
			return $array;

		} else {
			print "Error Getting Items data!";
			exit;
		}

	}

	function getFile($url,$type){
		$file = preg_split("/\//",$url);
		$file = end($file);
		if(!file_exists($this->conf->disc_url.'images/'.$type.'/'.$file)){
			$return = $this->subir($file,$url,$type);
			if($return == '404' && $type == 'summonericon'){
				return str_replace(" ","%20",$this->conf->http_url.'images/'.$type.'/404.png');
			} else { 
				return $return;
			}
		} else {
			return str_replace(" ","%20",$this->conf->http_url.'images/'.$type.'/'.$file);
		}
	}

	private function subir($name,$imagen,$type){
		$ruta = $this->conf->disc_url.'images/';
		// Verificar si existe la carpeta para el tipo de imagen ("$type") y en caso de no existir, la crea.
		foreach(preg_split("/\//", $type) as $t){
			$ruta .= $t.'/';
			if(!file_exists($ruta)) {
				mkdir($ruta, 0777);
			}
		}
		$file_headers = @get_headers($imagen);
		if($file_headers[0] == 'HTTP/1.1 404 Not Found') {
		    return '404';
		} else {
			file_put_contents($ruta.$name, file_get_contents($imagen));	
			return str_replace(" ","%20",$this->conf->http_url.'images/'.$type.'/'.$name);
		}
	}

	private function update(){
		if (isset($_COOKIE['apitries']) && $_COOKIE['apitries'] > 20) {
			print '<META HTTP-EQUIV="REFRESH" CONTENT="120;URL='.$_SERVER['PHP_SELF'].'">';
			print "Reposando por 120 segundos";
			exit;
		}
		$context = stream_context_create(array(
    		'http' => array('ignore_errors' => true),
		));

		print "Getting data From DB... ";
		$this->query="SELECT region, matchid FROM matchs WHERE region IN('LAS','NA','KR') AND updated IS NULL LIMIT 10";
		print "DONE<br>";
		$this->get_result_from_query();
		if(empty($this->rows[0])){
			print "No more data outdated found in the Database Records :D";
			exit;
		}
		foreach ($this->rows as $v) {
			unset($vals);
			$region=$v[0];$matchid= $v[1];
			$this->query="SELECT count(*) FROM matchs WHERE matchid='$matchid' AND region='$region' AND updated='1'";
			$this->get_result_from_query();
			if(!(isset($this->rows[0][0]) && $this->rows[0][0] > '0')){
				print "<br>$matchid - $region<br><br>";

				$region = strtolower($region);
				print "Getting Data from api... ";
				$json = file_get_contents("https://$region.api.pvp.net/api/lol/$region/v2.2/match/$matchid?".$this->conf->api_id,false,$context);
				$matchsarray = json_decode($json);
				if (empty($matchsarray->participants)) {
					print "ERROR<br>Reloading Page...<br>";
					$apitries = (isset($_COOKIE['apitries'])) ? $_COOKIE['apitries']++ : 1;
					setcookie('apitries',$apitries,time()+60, "/");
					print '<META HTTP-EQUIV="REFRESH" CONTENT="1;URL='.$_SERVER['PHP_SELF'].'">';
				} else {
					$region = strtoupper($region);
					print "DONE<br>";

					$participants = $matchsarray->participants;				
					print "Assign values for each participant... ";
					foreach ($participants as $participant) {
						$teamid = $participant->teamId;
						$champid = $participant->championId;
							$stats = $participant->stats;
						$this->query="SELECT count(*) FROM matchparticipants WHERE id='".$region.$matchid.$teamid.$champid."'";
						$this->get_result_from_query();
						if(!(isset($this->rows[0][0]) && $this->rows[0][0] > '0')){
							$vals = (isset($vals)) ? $vals.", ('".$region.$matchid.$teamid.$champid."','$matchid','$region'" : "('".$region.$matchid.$teamid.$champid."','$matchid','$region'";
							foreach ($participant as $key => $value) {
								if($key != 'stats' && $key != 'runes' && $key != 'masteries' && $key != 'timeline'){
									$vals .= (!empty($value)) ? ",'$value'" : ", NULL";
								}
							}
							foreach ($stats as $key => $value) {
								$vals .= (!empty($value)) ? ",'$value'" : ", NULL";
							}
							$vals .= ")";
						}
					}
					if(isset($vals)){
						print " DONE<br>Insert participants into DB... ";
						$this->query = "INSERT INTO matchparticipants (id,matchId,region,teamId,spell1Id,spell2Id,championId,highestAchievedSeasonTier,participantId,winner,champLevel,item0,item1,item2,item3,item4,item5,item6,kills,doubleKills,
									tripleKills,quadraKills,pentaKills,unrealKills,largestKillingSpree,deaths,assists,totalDamageDealt,totalDamageDealtToChampions,totalDamageTaken,largestCriticalStrike,totalHeal,minionsKilled,
									neutralMinionsKilled,neutralMinionsKilledTeamJungle,neutralMinionsKilledEnemyJungle,goldEarned,goldSpent,combatPlayerScore,objectivePlayerScore,totalPlayerScore,totalScoreRank,
									magicDamageDealtToChampions,physicalDamageDealtToChampions,trueDamageDealtToChampions,visionWardsBoughtInGame,sightWardsBoughtInGame,magicDamageDealt,physicalDamageDealt,trueDamageDealt,
									magicDamageTaken,physicalDamageTaken,trueDamageTaken,firstBloodKill,firstBloodAssist,firstTowerKill,firstTowerAssist,firstInhibitorKill,firstInhibitorAssist,inhibitorKills,towerKills,
									wardsPlaced,wardsKilled,largestMultiKill,killingSprees,totalUnitsHealed,totalTimeCrowdControlDealt) VALUES ";
						$this->query .= $vals;
						$this->execute_single_query();
						print " DONE<br>Update match in DB... ";

						$this->query = "UPDATE matchs SET ";
						foreach ($matchsarray as $key => $value) {
							if($key != 'teams' && $key != 'participants' && $key != 'participantIdentities'){
								$sets = (isset($sets)) ? $sets.",$key='$value'" : "$key='$value'";
							}
						}
						$this->query.= $sets.",updated='1' WHERE matchid='$matchid' AND region='$region'";
						$this->execute_single_query();				
						print " DONE <br><br>";
					} else {
						print "Can't find Values!<br>";
						print "Marking as Updated... ";
						$this->query = "UPDATE matchs SET ";
						foreach ($matchsarray as $key => $value) {
							if($key != 'teams' && $key != 'participants' && $key != 'participantIdentities'){
								$sets = (isset($sets)) ? $sets.",$key='$value'" : "$key='$value'";
							}
						}
						$this->query.= $sets.",updated='1' WHERE matchid='$matchid' AND region='$region'";
						$this->execute_single_query();				
						print " DONE <br><br>";
					}
					print '<META HTTP-EQUIV="REFRESH" CONTENT="1;URL='.$_SERVER['PHP_SELF'].'">';
				}
			}
		}
		print  '<script>$(window).load(function() {
  				$("html, body").animate({ scrollTop: $(document).height() }, 1000);
				});</script>';
		$this->query="SELECT count(*) FROM matchs WHERE region IN('LAS','NA','KR') AND updated IS NULL";
		$this->get_result_from_query();
		print $this->rows[0][0]."<div id=\"end\">Partidas restantes.</div><br><br>";
		
		/*
		$regiones = array('BR','EUNE','EUW','KR','LAN','LAS','NA','OCE','RU','TR');
			$region = 'TR';
			$json = file_get_contents('BILGEWATER/'.$region.'.json');
			$matchsarray = json_decode($json);

			foreach ($matchsarray as $matchid) {
				$this->values = (isset($this->values)) ? $this->values.",('".$region."','$matchid')" : "('".$region."','$matchid')";
				//$this->values = "('".$region."','$matchid');";
			}
			$this->query = "INSERT INTO matchs (region,matchid) VALUES ".$this->values;
			$this->execute_single_query();
			print "Insertado <b>".count($matchsarray)."</b> datos de <b>$region</b>.";
			*/
	}
}

$core = new Core();
?>